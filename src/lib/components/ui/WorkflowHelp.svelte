<script lang="ts">
	let { isOpen = $bindable(false) } = $props();

	function closeModal() {
		isOpen = false;
	}
</script>

{#if isOpen}
	<div class="modal modal-open">
		<div class="modal-box w-11/12 max-w-4xl">
			<h3 class="mb-4 text-lg font-bold">ğŸ”„ Wunsch-Workflow & Prozessbeschreibung</h3>

			<div class="space-y-6">
				<!-- Workflow Overview -->
				<div class="alert alert-info">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 24 24"
						class="h-6 w-6 shrink-0 stroke-current"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
						></path>
					</svg>
					<div>
						<h4 class="font-bold">Gesamtprozess:</h4>
						<p>
							WÃ¼nsche durchlaufen einen strukturierten Workflow von der Erstellung bis zur
							VerÃ¶ffentlichung in WishSnap.
						</p>
					</div>
				</div>

				<!-- Workflow Steps -->
				<div class="space-y-4">
					<h4 class="border-base-300 border-b pb-2 text-lg font-semibold">ğŸ“‹ Workflow-Schritte</h4>

					<!-- Step 1: Entwurf -->
					<div class="card bg-base-100 border-warning/20 border">
						<div class="card-body">
							<div class="mb-2 flex items-center gap-3">
								<div class="badge badge-warning">1</div>
								<h5 class="text-warning font-bold">ğŸ“ Entwurf</h5>
							</div>
							<p class="mb-3 text-sm">
								<strong>Zweck:</strong> Erstellung und Bearbeitung von WÃ¼nschen
							</p>
							<div class="space-y-1 text-sm">
								<p><strong>Berechtigung:</strong> Redakteure & Administratoren</p>
								<p><strong>Aktionen:</strong> Erstellen, Bearbeiten, LÃ¶schen</p>
								<p><strong>NÃ¤chster Schritt:</strong> â†’ Zur Freigabe oder â†’ Archiviert</p>
								<p>
									<strong>Beschreibung:</strong> Hier werden neue WÃ¼nsche geschrieben und bestehende
									Ã¼berarbeitet. Der Inhalt kann beliebig oft geÃ¤ndert werden.
								</p>
							</div>
						</div>
					</div>

					<!-- Step 2: Zur Freigabe -->
					<div class="card bg-base-100 border-info/20 border">
						<div class="card-body">
							<div class="mb-2 flex items-center gap-3">
								<div class="badge badge-info">2</div>
								<h5 class="text-info font-bold">â³ Zur Freigabe</h5>
							</div>
							<p class="mb-3 text-sm"><strong>Zweck:</strong> QualitÃ¤tsprÃ¼fung und Genehmigung</p>
							<div class="space-y-1 text-sm">
								<p>
									<strong>Berechtigung:</strong> Redakteure kÃ¶nnen einreichen, Administratoren genehmigen
								</p>
								<p><strong>Aktionen:</strong> PrÃ¼fung auf QualitÃ¤t, Grammatik, Angemessenheit</p>
								<p>
									<strong>NÃ¤chster Schritt:</strong> â†’ Freigegeben, â†’ Entwurf (zurÃ¼ck) oder â†’ Archiviert
								</p>
								<p>
									<strong>Beschreibung:</strong> Administratoren prÃ¼fen eingereichte WÃ¼nsche und entscheiden
									Ã¼ber deren Freigabe.
								</p>
							</div>
						</div>
					</div>

					<!-- Step 3: Freigegeben -->
					<div class="card bg-base-100 border-success/20 border">
						<div class="card-body">
							<div class="mb-2 flex items-center gap-3">
								<div class="badge badge-success">3</div>
								<h5 class="text-success font-bold">âœ… Freigegeben</h5>
							</div>
							<p class="mb-3 text-sm">
								<strong>Zweck:</strong> QualitÃ¤tsgeprÃ¼fte WÃ¼nsche bereit fÃ¼r Release
							</p>
							<div class="space-y-1 text-sm">
								<p><strong>Berechtigung:</strong> Nur Administratoren kÃ¶nnen freigeben</p>
								<p><strong>Aktionen:</strong> Release fÃ¼r WishSnap mÃ¶glich</p>
								<p><strong>NÃ¤chster Schritt:</strong> â†’ Released (WishSnap) oder â†’ Archiviert</p>
								<p>
									<strong>Beschreibung:</strong> Freigegebene WÃ¼nsche sind qualitÃ¤tsgeprÃ¼ft und kÃ¶nnen
									fÃ¼r die Ã¶ffentliche WishSnap-App released werden.
								</p>
							</div>
						</div>
					</div>

					<!-- Step 4: Released -->
					<div class="card bg-base-100 border-accent/20 border">
						<div class="card-body">
							<div class="mb-2 flex items-center gap-3">
								<div class="badge badge-accent">4</div>
								<h5 class="text-accent font-bold">ğŸš€ Released</h5>
							</div>
							<p class="mb-3 text-sm">
								<strong>Zweck:</strong> Ã–ffentliche VerfÃ¼gbarkeit in WishSnap-App
							</p>
							<div class="space-y-1 text-sm">
								<p><strong>Berechtigung:</strong> Administratoren & Redakteure kÃ¶nnen releasen</p>
								<p>
									<strong>Aktionen:</strong> Snapshot in separate Tabelle, Ã¶ffentlicher API-Zugriff
								</p>
								<p>
									<strong>API:</strong> VerfÃ¼gbar Ã¼ber /api/public/wishes (ohne Authentifizierung)
								</p>
								<p>
									<strong>Beschreibung:</strong> Released Wishes sind Ã¶ffentlich verfÃ¼gbar und kÃ¶nnen
									von der WishSnap-App heruntergeladen werden.
								</p>
							</div>
						</div>
					</div>

					<!-- Step 5: Archiviert -->
					<div class="card bg-base-100 border-neutral/20 border">
						<div class="card-body">
							<div class="mb-2 flex items-center gap-3">
								<div class="badge badge-ghost">A</div>
								<h5 class="text-neutral font-bold">ğŸ“ Archiviert</h5>
							</div>
							<p class="mb-3 text-sm"><strong>Zweck:</strong> Inaktivierung ohne LÃ¶schung</p>
							<div class="space-y-1 text-sm">
								<p><strong>Berechtigung:</strong> Nur Administratoren</p>
								<p><strong>Aktionen:</strong> Reaktivierung mÃ¶glich (â†’ Entwurf)</p>
								<p>
									<strong>Verwendung:</strong> QualitÃ¤tskontrolle, veraltete/ungeeignete Inhalte
								</p>
								<p>
									<strong>Beschreibung:</strong> Archivierte WÃ¼nsche sind inaktiv, aber nicht gelÃ¶scht.
									Sie kÃ¶nnen reaktiviert werden.
								</p>
							</div>
						</div>
					</div>
				</div>

				<!-- Roles & Permissions -->
				<div class="space-y-4">
					<h4 class="border-base-300 border-b pb-2 text-lg font-semibold">
						ğŸ‘¥ Rollen & Berechtigungen
					</h4>

					<div class="grid grid-cols-1 gap-4 md:grid-cols-2">
						<!-- Redakteur -->
						<div class="card bg-primary/5 border-primary/20 border">
							<div class="card-body">
								<h5 class="text-primary flex items-center gap-2 font-bold">
									<span class="badge badge-primary badge-xs">Redakteur</span>
									Standard-Benutzer
								</h5>
								<ul class="mt-2 space-y-1 text-sm">
									<li>âœ… WÃ¼nsche erstellen (Entwurf)</li>
									<li>âœ… Eigene WÃ¼nsche bearbeiten</li>
									<li>âœ… Zur Freigabe einreichen</li>
									<li>âœ… WÃ¼nsche fÃ¼r WishSnap releasen</li>
									<li>âŒ WÃ¼nsche freigeben</li>
									<li>âŒ WÃ¼nsche archivieren</li>
									<li>âŒ Fremde EntwÃ¼rfe bearbeiten</li>
								</ul>
							</div>
						</div>

						<!-- Administrator -->
						<div class="card bg-error/5 border-error/20 border">
							<div class="card-body">
								<h5 class="text-error flex items-center gap-2 font-bold">
									<span class="badge badge-error badge-xs">Administrator</span>
									Vollzugriff
								</h5>
								<ul class="mt-2 space-y-1 text-sm">
									<li>âœ… Alle Redakteur-Rechte</li>
									<li>âœ… WÃ¼nsche freigeben/ablehnen</li>
									<li>âœ… WÃ¼nsche archivieren</li>
									<li>âœ… Archivierte reaktivieren</li>
									<li>âœ… Alle WÃ¼nsche bearbeiten</li>
									<li>âœ… Benutzer verwalten</li>
									<li>âœ… System-Einstellungen</li>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<!-- WishSnap Integration -->
				<div class="space-y-4">
					<h4 class="border-base-300 border-b pb-2 text-lg font-semibold">
						ğŸ“± WishSnap Integration
					</h4>

					<div class="alert alert-success">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							class="h-6 w-6 shrink-0 stroke-current"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
							></path>
						</svg>
						<div class="text-sm">
							<h5 class="font-bold">Ã–ffentliche API:</h5>
							<p><strong>Endpoint:</strong> /api/public/wishes</p>
							<p><strong>Zugriff:</strong> Ohne Authentifizierung (Ã¶ffentlich)</p>
							<p><strong>Inhalt:</strong> Nur released Wishes (Snapshot-Daten)</p>
							<p><strong>Verwendung:</strong> WishSnap-App lÃ¤dt WÃ¼nsche fÃ¼r Offline-Nutzung</p>
						</div>
					</div>
				</div>

				<!-- Best Practices -->
				<div class="space-y-4">
					<h4 class="border-base-300 border-b pb-2 text-lg font-semibold">ğŸ’¡ Best Practices</h4>

					<div class="grid grid-cols-1 gap-4 md:grid-cols-2">
						<div>
							<h5 class="text-success mb-2 font-semibold">âœ… Empfohlenes Vorgehen:</h5>
							<ul class="space-y-1 text-sm">
								<li>â€¢ WÃ¼nsche in Entwurf sorgfÃ¤ltig prÃ¼fen</li>
								<li>â€¢ Klare, verstÃ¤ndliche Sprache verwenden</li>
								<li>â€¢ Platzhalter korrekt einsetzen</li>
								<li>â€¢ Angemessene Kategorisierung</li>
								<li>â€¢ Release nur nach QualitÃ¤tsprÃ¼fung</li>
							</ul>
						</div>
						<div>
							<h5 class="text-error mb-2 font-semibold">âŒ Zu vermeiden:</h5>
							<ul class="space-y-1 text-sm">
								<li>â€¢ Rechtschreibfehler in freigegebenen WÃ¼nschen</li>
								<li>â€¢ Unpassende/verletzende Inhalte</li>
								<li>â€¢ Zu generische oder zu spezifische WÃ¼nsche</li>
								<li>â€¢ Release ohne ausreichende PrÃ¼fung</li>
								<li>â€¢ HÃ¤ufige Status-Wechsel</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="modal-action">
				<button class="btn btn-primary" onclick={closeModal}>Verstanden</button>
			</div>
		</div>
	</div>
{/if}
